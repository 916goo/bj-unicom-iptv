{"version":3,"sources":["webpack:///./src/lib/download.js","webpack:///./src/lib/get-origin.js","webpack:///./src/lib/generate-m3u.js","webpack:///./src/lib/parse-channels.js","webpack:///./src/components/modal-custom.vue?f13a","webpack:///./src/components/modal-custom.vue","webpack:///src/App.vue","webpack:///src/components/modal-custom.vue","webpack:///./src/constants.js","webpack:///./src/App.vue?c623","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["lib_download","filename","content","blob","Blob","a","document","createElement","href","URL","createObjectURL","download","style","display","body","appendChild","click","removeChild","get_origin","input","matches","match","generate_m3u","title","arr","map","_ref","name","url","join","parseChannel","str","reg","ret","exec","parse_channels","info","push","components_modal_custom","render","_vm","this","_h","$createElement","_c","_self","attrs","on","on-ok","ok","on-cancel","cancel","model","value","callback","$$v","modalShow","expression","staticClass","type","staticRenderFns","App","ModalCustom","__webpack_require__","normalizeComponent","ssrContext","udpxy","params","row","h","current","_this","sort","b","assign_default","channel","ChannelURL","channelsFormatted","ChannelName","channelsHTML","_this2","data","message","selectortype_template_index_0_src_App","id","_v","placeholder","disabled","loading","html-type","custom","ref","submit","$event","arguments","columns","src_App","App_normalizeComponent","vue_runtime_esm","use","iview_default","config","productionTip","el"],"mappings":"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","file":"static/js/app.98be67e7f8f525eff307.js","sourcesContent":["const download = (filename, content) => {\n  const blob = new Blob([content]);\n\n  const a = document.createElement('a');\n\n  a.href = URL.createObjectURL(blob);\n\n  a.download = filename;\n\n  a.style.display = 'none';\n\n  document.body.appendChild(a);\n\n  a.click();\n\n  document.body.removeChild(a);\n};\n\nexport default download;\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/download.js","const getOrigin = (input) => {\n  const reg = /^http:\\/\\/[^/:]+(?::\\d+)?/;\n\n  const matches = input.match(reg);\n\n  if (!matches) {\n    return '';\n  }\n\n  return matches[0];\n};\n\nexport default getOrigin;\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/get-origin.js","const generateM3u = (title, arr) =>\n  `#EXTM3U name=\"${title}\"\\n${\n    arr.map(({\n      name,\n      url,\n    }) => `#EXTINF:-1,${name}\\n${url}`)\n      .join('\\n')\n  }`;\n\nexport default generateM3u;\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/generate-m3u.js","const parseChannel = (str) => {\n  const reg = /(\\w+)=\"([^\"]+)\"/g;\n\n  const ret = {};\n\n  for (;;) {\n    const matches = reg.exec(str);\n\n    if (!matches) {\n      break;\n    }\n\n    ret[matches[1]] = matches[2];\n  }\n\n  return ret;\n};\n\nconst parseChannels = (str) => {\n  const ret = [];\n\n  const reg = /CU_CTC_Auther\\('Channel',([^)]+)\\)/g;\n\n  for (;;) {\n    const matches = reg.exec(str);\n\n    if (!matches) {\n      break;\n    }\n\n    const info = parseChannel(matches[1]);\n\n    ret.push(info);\n  }\n\n  return ret;\n};\n\nexport default parseChannels;\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/parse-channels.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"title\":\"Common Modal dialog box title\"},on:{\"on-ok\":_vm.ok,\"on-cancel\":_vm.cancel},model:{value:(_vm.modalShow),callback:function ($$v) {_vm.modalShow=$$v},expression:\"modalShow\"}},[_c('Input',{staticClass:\"modal-custom-textarea\",attrs:{\"type\":\"textarea\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-06ca840c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/modal-custom.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-06ca840c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./modal-custom.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./modal-custom.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./modal-custom.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-06ca840c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./modal-custom.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/modal-custom.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <div\n      class=\"form\"\n    >\n      <label>\n        udpxy address:\n        <i-input\n          class=\"input-udpxy\"\n          v-model=\"udpxy\"\n          placeholder=\"Your udpxy address, e.g. http://192.168.1.4:8012\"\n          :disabled=\"loading\"\n        />\n      </label>\n\n      <Button\n        html-type=\"button\"\n        @click=\"download\"\n        :disabled=\"loading\"\n      >\n        Download playlist\n      </Button>\n\n      <Button\n        html-type=\"button\"\n        @click=\"custom\"\n        :disabled=\"loading\"\n      >\n        Custom channels HTML\n      </Button>\n\n      <ModalCustom\n        @submit=\"channelsHTML = arguments[0]\"\n        ref=\"modalCustom\"\n      />\n    </div>\n\n    <Table\n      :loading=\"loading\"\n      :columns=\"columns\"\n      :data=\"channelsFormatted\"\n    />\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nimport download from './lib/download';\n\nimport getOrigin from './lib/get-origin';\n\nimport generateM3u from './lib/generate-m3u';\n\nimport parseChannels from './lib/parse-channels';\n\nimport {\n  udpxyDefault,\n  filename,\n} from './constants';\n\nimport ModalCustom from './components/modal-custom';\n\nexport default {\n  name: 'App',\n  components: {\n    ModalCustom,\n  },\n  data() {\n    return {\n      loading: true,\n      udpxy: localStorage.udpxy || '',\n      columns: [\n        {\n          title: 'channel name',\n          key: 'ChannelName',\n        },\n        {\n          title: 'channel url',\n          key: 'ChannelURL',\n        },\n        {\n          title: 'udpxy url',\n          key: 'udpxy',\n        },\n        {\n          title: 'Play in VLC (iOS)',\n          key: 'udpxy',\n          width: 140,\n          render: (h, params) => {\n            const {\n              row: {\n                udpxy,\n              },\n            } = params;\n\n            const scheme = `vlc-x-callback://x-callback-url/stream?url=${encodeURIComponent(udpxy)}`;\n\n            return (\n              <a\n                class=\"icon-vlc\"\n                href={scheme}\n                title=\"Play in VLC (iOS)\"\n              ></a>\n            );\n          },\n        },\n      ],\n      channelsHTML: '',\n    };\n  },\n  watch: {\n    udpxy(current) {\n      localStorage.udpxy = current;\n    },\n  },\n  computed: {\n    channelsFormatted() {\n      const channels = parseChannels(this.channelsHTML).sort(\n        (a, b) => parseInt(a.UserChannelID, 10) - parseInt(b.UserChannelID, 10)\n      );\n\n      return channels.map(channel =>\n        Object.assign(channel, {\n          udpxy: this.formatWithProxy(channel.ChannelURL),\n        })\n      );\n    },\n  },\n  methods: {\n    formatWithProxy(url) {\n      const prefix = getOrigin(this.udpxy) || udpxyDefault;\n\n      const path = url.replace(/^\\w+:\\/\\//, '/rtp/');\n\n      return `${prefix}${path}`;\n    },\n    download() {\n      const content = generateM3u(filename, this.channelsFormatted\n        .map(({\n          ChannelName,\n          udpxy,\n        }) => ({\n          name: ChannelName,\n          url: udpxy,\n        }))\n      );\n\n      download(\n        `${filename}.m3u`,\n        content\n      );\n    },\n    custom() {\n      this.$refs.modalCustom.show(this.channelsHTML);\n    },\n  },\n  async mounted() {\n    try {\n      const response = await axios.get('static/iptv.txt');\n\n      this.channelsHTML = response.data;\n    } catch (e) {\n      this.$Message.error(e.message);\n    } finally {\n      this.loading = false;\n    }\n  },\n};\n</script>\n\n<style scoped>\n#app {\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n\n  padding: 10px;\n}\n\n.form {\n  padding: 10px;\n  margin: 10px 0 20px;\n  border: 1px solid #ccc;\n}\n\n.input-udpxy {\n  width: 300px;\n}\n\nlabel {\n  display: block;\n  padding: 20px 0;\n}\n</style>\n\n<style>\n.icon-vlc {\n  display: block;\n  margin: auto;\n  width: 2.5em;\n  height: 2.5em;\n  background: url('./img/icon-vlc.svg') no-repeat;\n  background-size: cover;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<template>\n  <Modal\n    v-model=\"modalShow\"\n    title=\"Common Modal dialog box title\"\n    @on-ok=\"ok\"\n    @on-cancel=\"cancel\"\n  >\n    <Input\n      class=\"modal-custom-textarea\"\n      type=\"textarea\"\n      v-model=\"value\"\n    />\n  </Modal>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      value: '',\n      modalShow: false,\n    };\n  },\n  methods: {\n    ok() {\n      this.$emit('submit', this.value);\n    },\n    cancel() {},\n    show(value) {\n      this.value = value;\n      this.modalShow = true;\n    },\n  },\n};\n</script>\n\n<style>\n.modal-custom-textarea textarea {\n  height: 50vh;\n  resize: none;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/modal-custom.vue","export const udpxyDefault = 'http://192.168.1.4:8012';\n\nexport const filename = 'bj-unicom-iptv';\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"form\"},[_c('label',[_vm._v(\"\\n      udpxy address:\\n      \"),_c('i-input',{staticClass:\"input-udpxy\",attrs:{\"placeholder\":\"Your udpxy address, e.g. http://192.168.1.4:8012\",\"disabled\":_vm.loading},model:{value:(_vm.udpxy),callback:function ($$v) {_vm.udpxy=$$v},expression:\"udpxy\"}})],1),_vm._v(\" \"),_c('Button',{attrs:{\"html-type\":\"button\",\"disabled\":_vm.loading},on:{\"click\":_vm.download}},[_vm._v(\"\\n      Download playlist\\n    \")]),_vm._v(\" \"),_c('Button',{attrs:{\"html-type\":\"button\",\"disabled\":_vm.loading},on:{\"click\":_vm.custom}},[_vm._v(\"\\n      Custom channels HTML\\n    \")]),_vm._v(\" \"),_c('ModalCustom',{ref:\"modalCustom\",on:{\"submit\":function($event){_vm.channelsHTML = arguments[0]}}})],1),_vm._v(\" \"),_c('Table',{attrs:{\"loading\":_vm.loading,\"columns\":_vm.columns,\"data\":_vm.channelsFormatted}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c721931e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c721931e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c721931e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=1!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c721931e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c721931e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue';\n\nimport iView from 'iview';\nimport 'iview/dist/styles/iview.css';\n\nimport App from './App';\n\nVue.use(iView);\n\nVue.config.productionTip = false;\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  render: h => h(App),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}